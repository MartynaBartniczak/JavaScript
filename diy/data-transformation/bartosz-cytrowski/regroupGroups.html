<link rel="stylesheet" href="../../../vendor/qunit.css">

<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script src="../../../vendor/qunit.js"></script>
<script src="../data.js"></script>
<script>
  /**
   * Returns an array with groups having nested student lists.
   *
   * @param groups
   */
  function regroupGroups(groups) {
    return groups.reduce(function (summary, next) {
      if (next.studentIds.length === 1) {
        if (summary[0] === undefined) {
          summary[0] = [next]
        } else {
          summary[0].push(next)
        }

        return summary;
      }

      if (next.studentIds.length > 1) {
        if (summary[1] === undefined) {
          summary[1] = [next]
        } else {
          summary[1].push(next)
        }

        return summary;
      }
      return summary;
    }, [])
  }
  QUnit.test('Get groups with students', function (assert) {
    assert.deepEqual(
      regroupGroups(data.groups),
      [[
          {
            id: 3,
            name: 'JFDD-3',
            studentIds: [3]
          }
        ],
        [
          {
            id: 1,
            name: 'JFDD-1',
            studentIds: [1, 2]
          },
          {
            id: 2,
            name: 'JFDD-2',
            studentIds: [1, 3]
          }
        ]
      ]
    );
  });
</script>